# DAA Tasks

## Now
- [ ] (auto) NOW: funds-hub-rebalance-preview-slippage-sensitivity-v0 :: Funds Hub: add slippage/spread sensitivity toggle in rebalance preview (impact estimate)

## Backlog

Planning note: priority = top to bottom. Keep each task ~1 PR.

Funds hub epic (human note): make `/daa/market/funds` the primary hub and expose the shortest workflow path.


Dynamic rebalancing core (main objective)












- [ ] funds-hub-rebalance-preview-slippage-sensitivity-v0 :: Funds Hub: add slippage/spread sensitivity toggle in rebalance preview (impact estimate)

- [ ] funds-hub-rebalance-whatif-threshold-slider-v0 :: Funds Hub: drift-threshold what-if slider + instant recompute of proposed trades

- [ ] daa-fix-rebalance-core-route-404 :: Fix prod /api/daa/rebalance/core (currently 404)

- [ ] daa-fix-market-digest-fetch-failed :: Fix /api/daa/analysis/market-digest (500 fetch failed) + make cron-ready

- [ ] daa-okx-crypto-data-ingest-v0 :: Crypto v0: integrate OKX market data (server-side) + normalize

- [ ] funds-hub-rebalance-preview-cash-buffer-rounding-v0 :: Funds Hub: rebalance preview includes cash buffer + rounding/lot-size impacts in diff
## Done

- [x] funds-hub-workflow-checklist-v0 :: Funds hub checklist v0：DAA Workflow 面板（Checklist + Jump actions） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/102)

- [x] funds-hub-workflow-export-v0 :: Funds hub export v0：一键导出 Step2/4/5/6/7 bundle JSON (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/103)

- [x] funds-hub-workflow-import-v0 :: Funds hub import v0：粘贴 bundle JSON → restore 状态（带校验/错误提示） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/99)

- [x] funds-hub-step1-entry-v0 :: Funds hub Step1 v0：提供回测入口 + 当前策略/结果摘要回写 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/104)

- [x] rebalance-engine-core-v0 :: 动态再平衡核心 v0：输入(当前持仓/价格/目标权重)→输出(orders/target weights) + 可复制 JSON (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/105)

- [x] portfolio-state-store-v0 :: 投资组合状态存储 v0：positions/cash/lastRebalance + schema versioning (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/106)

- [x] rebalance-threshold-policy-v0 :: 再平衡触发策略 v0：阈值/最小交易额/冷却时间（防抖） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/107)

- [x] execution-adapter-paper-v0 :: 执行适配（paper）v0：把 orders 记录成 execution log（不真下单） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/108)

- [x] funds-hub-rebalance-panel-v0 :: /daa/market/funds 增加 Rebalance 面板 v0：展示当前 vs 目标、偏离度、生成建议单 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/109)

- [x] observability-rebalance-log-v0 :: 可观测性 v0：rebalancing log + 导出 bundle（用于复盘/追溯） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/110)

- [x] backtest-drift-sim-v0 :: 漂移+再平衡回测 v0：给定历史价格→模拟执行→输出指标 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/111)

- [x] funds-hub-portfolio-editor-v0 :: Funds hub portfolio editor v0：编辑 cash/positions（schemaVersioned），并能一键 copy JSON (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/112)

- [x] funds-hub-price-input-v0 :: Funds hub price input v0：为 symbols 提供手动输入/粘贴价格快照，并持久化 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/113)

- [x] funds-hub-rebalance-run-paper-v0 :: Funds hub rebalance run (paper) v0：trigger policy→orders→record execution log→更新 portfolioState.lastRebalance (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/114)

- [x] funds-hub-target-weights-editor-v0 :: Funds hub 目标权重编辑 v0：手工编辑/粘贴 targetWeights 并持久化；paper rebalance 优先使用该输入 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/115)

- [x] funds-hub-rebalance-policy-editor-v0 :: Funds hub policy 编辑 v0：阈值/最小交易额/冷却时间（防抖）可配置，并写入 core request (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/116)

- [x] funds-hub-rebalance-log-view-v0 :: Funds hub log view v0：展示最近 N 次 paper rebalance（trigger/weights/orders）并支持 copy/export (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/117)

- [x] backtest-drift-ui-v0 :: 回测 UI v0：粘贴价格序列/价格快照 → drift+rebalance simulator → 输出指标摘要（用于复盘/调参） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/118)

- [x] funds-hub-shortest-path-v1 :: Funds hub 最短路径 v1：默认展开 DAA Workflow；顶部给出“下一步”+一键跳转；错误提示一致 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/119)

- [x] funds-hub-sample-scenario-v0 :: Funds hub demo v0：一键填充 sample portfolio/weights/prices（用于演示+回归） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/120)

- [x] rebalance-orders-review-v0 :: Orders review v0：把 orders 展成表格（side/notional/reason）+ 风险提示（cash不足/minTrade） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/121)

- [x] rebalance-report-export-v0 :: Rebalance report export v0：导出最近一次 run 的 request/response/logs 为可下载 JSON（带 schemaVersion） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/122)

- [x] backtest-policy-sweep-v0 :: Policy sweep v0：对 threshold/minTrade/cooldown 做参数扫描，输出指标对比（用于调参） (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/123)

- [x] execution-adapter-interface-v0 :: Execution adapter interface v0：抽象 paper vs real 执行接口；paper 作为默认实现 (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/124)

- [x] funds-hub-rebalance-whatif-preview-v0 :: Funds hub: rebalance what-if preview (fees/slippage + expected drift) (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/125)

- [x] funds-hub-rebalance-e2e-smoke-v0 :: Funds hub: one-click rebalance E2E smoke (generate orders, review, export) (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/126)

- [x] funds-hub-rebalance-preview :: Funds hub: show per-fund pre/post target weights for dynamic rebalancing preview (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/127)

- [x] funds-hub-rebalance-drift-badges :: Funds hub: add drift badges + quick filters (over/under target) for rebalancing (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/128)

- [x] funds-hub-rebalance-live-drift-alerts-v0 :: Funds hub: show live drift alerts during dynamic rebalance run (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/129)

- [x] funds-hub-rebalance-run-retry-ux-v0 :: Funds hub: add retry UX for failed dynamic rebalance run (keep context) (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/130)

- [x] funds-hub-rebalance-run-summary-v0 :: Funds Hub: add post-run summary banner (filled vs target + next-step CTA) (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/131)

- [x] funds-hub-rebalance-preview-turnover-v0 :: Funds Hub: show estimated turnover + fees/slippage in rebalance preview (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/132)

- [x] funds-hub-rebalance-run-cancel-ux-v0 :: Funds Hub: add cancel/abort flow for an in-progress rebalance run (UI + API) (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/133)

- [x] funds-hub-rebalance-postrun-healthcheck-v0 :: Funds Hub: show post-run healthcheck (expected vs actual drift/turnover) with clear pass/fail (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/134)

- [x] funds-hub-rebalance-brokerage-fees-v0 :: Funds hub: show estimated brokerage fees + net impact in rebalance preview (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/135)

- [x] funds-hub-rebalance-execution-mode-toggle-v0 :: Funds hub: add execution mode toggle (paper vs live) to rebalance run flow (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/136)

- [x] funds-hub-rebalance-dry-run-mode-v0 :: Funds hub: add "Dry run" mode for rebalancing (no orders sent) with clear UI copy (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/137)

- [x] funds-hub-rebalance-e2e-dynamic-drift-v0 :: Dynamic rebalancing E2E: simulate price drift across steps and verify suggested trade set updates (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/138)

- [x] funds-hub-rebalance-e2e-cash-check-v0 :: Funds Hub: add pre-trade cash/settlement check + blocking warning in rebalance flow (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/139)

- [x] funds-hub-rebalance-e2e-auto-plan-v0 :: Funds Hub: one-click generate dynamic rebalance plan (drift -> orders) with preview diff (PR: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/140)
## Log

- 2026-02-12 11:11 activated funds-hub-integrate-steps-v0
- 2026-02-12 12:03 refined milestone granularity; switched active to funds-hub-workflow-checklist-v0

- 2026-02-12 12:20 DONE funds-hub-workflow-checklist-v0 merged: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/102

- 2026-02-12 12:26 activated funds-hub-workflow-export-v0

- 2026-02-12 12:34 DONE funds-hub-workflow-export-v0 — merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/103

- 2026-02-12 12:40 activated funds-hub-workflow-import-v0

- 2026-02-12 12:46 DONE funds-hub-workflow-import-v0 — merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/99 (SoT advanced: no next milestone)

- 2026-02-12 12:51 activated funds-hub-step1-entry-v0

- 2026-02-12 13:06 DONE: funds-hub-step1-entry-v0 :: Funds hub Step1 v0：提供回测入口 + 当前策略/结果摘要回写 — merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/104

- 2026-02-12 13:10 activated rebalance-engine-core-v0

- 2026-02-12 13:25 DONE rebalance-engine-core-v0 → merged PR #105: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/105

- 2026-02-12 13:31 activated portfolio-state-store-v0

- 2026-02-12 13:43 DONE: portfolio-state-store-v0 merged (#106)

- 2026-02-12 13:46 activated rebalance-threshold-policy-v0

- 2026-02-12 14:03 DONE rebalance-threshold-policy-v0: merged PR #107 (rebalance trigger policy threshold/minTrade/cooldown) — https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/107

- 2026-02-12 14:05 activated execution-adapter-paper-v0

- 2026-02-12 14:21 DONE: execution-adapter-paper-v0 merged (#108) — paper execution log (localStorage)

- 2026-02-12 14:26 activated funds-hub-rebalance-panel-v0

- 2026-02-12 14:38 DONE: funds-hub-rebalance-panel-v0 merged via PR #109

- 2026-02-12 14:50 activated observability-rebalance-log-v0

- 2026-02-12 15:46 DONE observability-rebalance-log-v0: merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/110 (CI: test/typecheck/build OK).

- 2026-02-12 15:51 activated backtest-drift-sim-v0

- 2026-02-12 16:02 DONE: backtest-drift-sim-v0 merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/111

- 2026-02-12 16:23 activated funds-hub-portfolio-editor-v0

- 2026-02-12 16:36 DONE: funds-hub-portfolio-editor-v0 merged → https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/112

- 2026-02-12 16:40 activated funds-hub-price-input-v0

- 2026-02-12 16:51 DONE: funds-hub-price-input-v0 merged via https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/113

- 2026-02-12 16:55 activated funds-hub-rebalance-run-paper-v0

- 2026-02-12 17:08 DONE funds-hub-rebalance-run-paper-v0: merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/114 (Market/Funds DAA Workflow → Rebalance v0 adds paper run button: core request→core endpoint→paper execution log + portfolioState.lastRebalance).

- 2026-02-12 17:56 activated funds-hub-target-weights-editor-v0

- 2026-02-12 18:08 DONE funds-hub-target-weights-editor-v0 merged: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/115

- 2026-02-12 18:15 activated funds-hub-rebalance-policy-editor-v0

- 2026-02-12 18:23 DONE: funds-hub-rebalance-policy-editor-v0 :: Funds hub policy 编辑 v0（threshold/minTradeNotional/cooldownSeconds 可配置并写入 core request） — merged PR #116 https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/116

- 2026-02-12 18:25 activated funds-hub-rebalance-log-view-v0

- 2026-02-12 18:34 DONE: funds-hub-rebalance-log-view-v0 merged → https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/117

- 2026-02-12 18:40 activated backtest-drift-ui-v0

- 2026-02-12 18:51 DONE: backtest-drift-ui-v0 merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/118

- 2026-02-12 20:10 activated funds-hub-shortest-path-v1

- 2026-02-12 20:25 DONE: funds-hub-shortest-path-v1 merged: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/119

- 2026-02-12 20:30 activated funds-hub-sample-scenario-v0

- 2026-02-12 20:42 DONE: funds-hub-sample-scenario-v0 merged via https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/120

- 2026-02-12 20:45 activated rebalance-orders-review-v0

- 2026-02-12 20:57 DONE: rebalance-orders-review-v0 merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/121

- 2026-02-12 21:00 activated rebalance-report-export-v0

- 2026-02-12 21:13 DONE: rebalance-report-export-v0 -> merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/122

- 2026-02-12 21:20 activated backtest-policy-sweep-v0

- 2026-02-12 21:53 DONE: backtest-policy-sweep-v0 :: Policy sweep v0（threshold/minTrade/cooldown 参数扫描） merged: https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/123

- 2026-02-12 21:55 activated execution-adapter-interface-v0

- 2026-02-12 22:07 DONE execution-adapter-interface-v0 -> merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/124

- 2026-02-12 22:13 autofill added funds-hub-rebalance-whatif-preview-v0

- 2026-02-12 22:13 autofill added funds-hub-rebalance-e2e-smoke-v0

- 2026-02-12 22:15 activated funds-hub-rebalance-whatif-preview-v0

- 2026-02-12 22:36 DONE: funds-hub-rebalance-whatif-preview-v0 merged -> https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/125

- 2026-02-12 22:40 activated funds-hub-rebalance-e2e-smoke-v0

- 2026-02-12 22:49 DONE: funds-hub-rebalance-e2e-smoke-v0 merged (#126) https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/126

- 2026-02-13 00:14 autofill added funds-hub-rebalance-preview

- 2026-02-13 00:14 autofill added funds-hub-rebalance-drift-badges

- 2026-02-13 00:20 activated funds-hub-rebalance-preview

- 2026-02-13 00:34 DONE: funds-hub-rebalance-preview :: merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/127

- 2026-02-13 00:40 activated funds-hub-rebalance-drift-badges

- 2026-02-13 00:50 DONE: funds-hub-rebalance-drift-badges merged → https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/128

- 2026-02-13 02:12 autofill added funds-hub-rebalance-live-drift-alerts-v0

- 2026-02-13 02:12 autofill added funds-hub-rebalance-run-retry-ux-v0

- 2026-02-13 02:15 activated funds-hub-rebalance-live-drift-alerts-v0

- 2026-02-13 02:27 DONE: funds-hub-rebalance-live-drift-alerts-v0 :: merged PR #129 (live drift alerts during paper rebalance run). currentMilestoneKey cleared (no next queued).

- 2026-02-13 02:30 activated funds-hub-rebalance-run-retry-ux-v0

- 2026-02-13 02:41 DONE: funds-hub-rebalance-run-retry-ux-v0 :: Funds hub: add retry UX for failed dynamic rebalance run (keep context) :: merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/130

- 2026-02-13 04:12 autofill added funds-hub-rebalance-run-summary-v0

- 2026-02-13 04:12 autofill added funds-hub-rebalance-preview-turnover-v0

- 2026-02-13 04:15 activated funds-hub-rebalance-run-summary-v0

- 2026-02-13 04:28 DONE funds-hub-rebalance-run-summary-v0: merged PR #131 (post-run summary banner). SoT advanced; no next milestone queued.

- 2026-02-13 04:30 activated funds-hub-rebalance-preview-turnover-v0

- 2026-02-13 04:39 DONE: funds-hub-rebalance-preview-turnover-v0 merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/132

- 2026-02-13 06:12 autofill added funds-hub-rebalance-run-cancel-ux-v0

- 2026-02-13 06:12 autofill added funds-hub-rebalance-postrun-healthcheck-v0

- 2026-02-13 06:15 activated funds-hub-rebalance-run-cancel-ux-v0

- 2026-02-13 06:28 DONE: funds-hub-rebalance-run-cancel-ux-v0 :: merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/133

- 2026-02-13 06:30 activated funds-hub-rebalance-postrun-healthcheck-v0

- 2026-02-13 06:44 DONE: funds-hub-rebalance-postrun-healthcheck-v0 :: merged PR #134 (post-run healthcheck: expected vs actual drift/turnover)

- 2026-02-13 08:12 autofill added funds-hub-rebalance-brokerage-fees-v0

- 2026-02-13 08:12 autofill added funds-hub-rebalance-execution-mode-toggle-v0

- 2026-02-13 08:15 activated funds-hub-rebalance-brokerage-fees-v0

- 2026-02-13 08:25 DONE: funds-hub-rebalance-brokerage-fees-v0 merged (#135) https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/135

- 2026-02-13 08:30 activated funds-hub-rebalance-execution-mode-toggle-v0

- 2026-02-13 08:40 DONE: funds-hub-rebalance-execution-mode-toggle-v0 merged via PR #136 https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/136

- 2026-02-13 10:12 autofill added funds-hub-rebalance-dry-run-mode-v0

- 2026-02-13 10:12 autofill added funds-hub-rebalance-e2e-dynamic-drift-v0

- 2026-02-13 10:15 activated funds-hub-rebalance-dry-run-mode-v0

- 2026-02-13 10:31 DONE: funds-hub-rebalance-dry-run-mode-v0 merged via https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/137

- 2026-02-13 10:35 activated funds-hub-rebalance-e2e-dynamic-drift-v0

- 2026-02-13 10:41 DONE: funds-hub-rebalance-e2e-dynamic-drift-v0 :: Dynamic rebalancing E2E: simulate price drift across steps and verify suggested trade set updates (merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/138)

- 2026-02-13 12:01 autofill added funds-hub-rebalance-e2e-cash-check-v0

- 2026-02-13 12:01 autofill added funds-hub-rebalance-e2e-auto-plan-v0

- 2026-02-13 14:00 activated funds-hub-rebalance-e2e-cash-check-v0

- 2026-02-13 14:13 DONE: funds-hub-rebalance-e2e-cash-check-v0 :: merged PR #139 https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/139

- 2026-02-13 14:15 autofill added funds-hub-rebalance-preview-slippage-sensitivity-v0

- 2026-02-13 14:15 autofill added funds-hub-rebalance-whatif-threshold-slider-v0

- 2026-02-13 14:20 activated funds-hub-rebalance-e2e-auto-plan-v0

- 2026-02-13 14:44 smoke test report written: [[Automation/DAA System Smoke Test 2026-02-13]]

- 2026-02-13 14:50 DONE: funds-hub-rebalance-e2e-auto-plan-v0 :: merged https://github.com/Jarvis-agent-bot/Dynamic-Asset-Allocation/pull/140

- 2026-02-13 14:51 autofill added funds-hub-rebalance-preview-cash-buffer-rounding-v0

- 2026-02-13 14:51 activated funds-hub-rebalance-preview-slippage-sensitivity-v0
